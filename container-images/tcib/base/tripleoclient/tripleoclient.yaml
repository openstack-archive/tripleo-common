tcib_actions:
- run: bash /usr/local/bin/uid_gid_manage {{ tcib_user }}
- run: dnf -y install {{ tcib_packages['el' ~ tcib_release] | join(' ') }};
- run: dnf -y install {{ tcib_packages['common'] | join(' ') }} && dnf clean all && rm -rf /var/cache/dnf
- run: openstack complete | tee /etc/bash_completion.d/osc.bash_completion > /dev/null
- run: cp /usr/share/openstack-tripleo-common-containers/container-images/kolla/tripleoclient/create_super_user.sh /usr/local/bin/create_super_user.sh
- run: cp /usr/share/openstack-tripleo-common-containers/container-images/kolla/tripleoclient/tripleoclient_sudoers /etc/sudoers.d/tripleoclient_sudoers
- run: chmod 750 /usr/local/bin/create_super_user.sh
- run: chmod 440 /etc/sudoers.d/tripleoclient_sudoers
tcib_packages:
  common:
  - sudo
  - e2fsprogs
  - git
  - openssh-clients
  - openstack-tripleo-validations
  - puppet-tripleo
  - python3-openstackclient
  - python3-tripleoclient
  - xfsprogs
  - python3-osc-placement
  - bash-completion
  - ipa-client
  el8:
  - ceph-ansible
  el9:
  - cephadm
tcib_user: cloud-admin
